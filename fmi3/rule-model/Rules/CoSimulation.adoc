// This adds the "functions" section header for VDM only
ifdef::hidden[]
// {vdm}
functions
// {vdm}
endif::[]

==== A.{section}.{counter:subsection} CoSimulation Rules
:!typerule:
===== A.{section}.{subsection}.{counter:typerule} Rule: validCSModelIdentifier
[[validCSModelIdentifier]]
// {vdm}
----
validCSModelIdentifier: CoSimulation +> bool
validCSModelIdentifier(cs) ==
	-- @OnFail("%NAME: %s not valid C variable name at %s",
	-- cs.modelIdentifier, loc2str(cs.location))
	( validIdentifier(cs.modelIdentifier) );
----
// {vdm}
- See <<modelIdentifier>>.
- See <<header-files-and-naming-of-functions>>.

===== A.{section}.{subsection}.{counter:typerule} Rule: validCSIntermediateUpdate
[[validCSIntermediateUpdate]]
// {vdm}
----
validCSIntermediateUpdate: CoSimulation +> bool
validCSIntermediateUpdate(cs) ==
	-- @OnFail("%NAME: canReturnEarlyAfterIntermediateUpdate requires providesIntermediateUpdate at %s",
	-- loc2str(cs.location))
	( cs.canReturnEarlyAfterIntermediateUpdate = true => cs.providesIntermediateUpdate = true );
----
// {vdm}
- See <<table-CoSimulation-details>>.

===== A.{section}.{subsection}.{counter:typerule} Rule: validCSEventMode
[[validCSEventMode]]
// {vdm}
----
validCSEventMode: CoSimulation * FmiModelDescription +> bool
validCSEventMode(cs, fmd) == 
	-- @OnFail("%NAME: hasEventMode must be true since FMU has clocks at %s",
	-- loc2str(cs.location))
	( let hasClocks = exists mv in seq fmd.modelVariables & is_Clock(mv) in
		hasClocks => cs.hasEventMode );
----
// {vdm}
- See <<table-CoSimulation-details>>.

// This adds the docrefs for VDM only
ifdef::hidden[]
// {vdm}
values
	CoSimulation_refs : ReferenceMap =
	{
		"validCSModelIdentifier" |->
		[
			"<FMI3_STANDARD>#modelIdentifier",
			"<FMI3_STANDARD>#header-files-and-naming-of-functions"
		],

		"validCSIntermediateUpdate" |->
		[
			"<FMI3_STANDARD>#table-CoSimulation-details"
		],

		"validCSEventMode" |->
		[
			"<FMI3_STANDARD>#table-CoSimulation-details"
		]
	};
// {vdm}
endif::[]
